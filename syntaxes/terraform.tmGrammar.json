{
  "scopeName": "source.hcl.terraform",
  "name": "HashiCorp Terraform",
  "uuid": "d9db10d3-db70-48aa-8d44-f96ccbaa29f3",
  "fileTypes": ["tf", "tfvars"],
  "patterns": [
    { "include": "#block" },
    { "include": "#functions" },
    { "include": "#named_value_references" },
    { "include": "source.hcl" }
  ],
  "repository": {
    "named_value_references": {
      "match": "\\b(var|local|module|data|path|terraform)\\b",
      "comment": "Constant values available only to Terraform.",
      "name": "support.constant.terraform"
    },
    "block": {
      "name": "meta.block.hcl",
      "comment": "This will match HCL blocks like `resource \"aws_instance\" \"web\" {` or `module {`",
      "begin": "(\\w+)([\\s\\\"\\-\\w]*)(\\{)",
      "beginCaptures": {
        "1": {
          "patterns": [
            {
              "match": "\\bresource|provider|variable|output|locals|module|data|terraform\\b",
              "comment": "Known block type",
              "name": "entity.name.type.terraform"
            },
            {
              "match": "\\b(?!null|false|true)[[:alpha:]][[:alnum:]_-]*\\b",
              "comment": "Unknown block type",
              "name": "entity.name.type.hcl"
            }
          ]
        },
        "2": {
          "patterns": [
            {
              "name": "variable.other.enummember.hcl",
              "comment": "Block label",
              "match": "[\\\"\\-\\w]+"
            }
          ]
        },
        "3": {
          "name": "punctuation.section.block.begin.hcl"
        }
      },
      "end": "\\}",
      "endCaptures": {
        "0": {
          "name": "punctuation.section.block.end.hcl"
        }
      },
      "patterns": [
        {
          "include": "#block"
        },
        {
          "include": "source.hcl#comments"
        },
        {
          "include": "source.hcl#attribute_definition"
        },
        {
          "include": "source.hcl#block"
        },
        {
          "include": "source.hcl#expressions"
        }
      ]
    },
    "functions": {
      "begin": "(\\w+)(\\()",
      "name": "meta.function-call.hcl",
      "comment": "Built-in function calls",
      "beginCaptures": {
        "1": {
          "patterns": [
            {
              "match": "abspath|abs|ceil|floor|log|max|min|pow|signum|chomp|formatlist|indent|join|lower|regexall|regex|replace|split|strrev|substr|title|trimspace|upper|chunklist|coalescelist|coalesce|compact|concat|contains|distinct|element|flatten|index|keys|length|lookup|matchkeys|merge|range|reverse|setintersection|setproduct|setunion|slice|sort|transpose|values|zipmap|base64decode|base64encode|base64gzip|csvdecode|jsondecode|jsonencode|urlencode|yamldecode|yamlencode|dirname|pathexpand|basename|fileexists|fileset|filebase64|templatefile|formatdate|timeadd|timestamp|base64sha256|base64sha512|bcrypt|filebase64sha256|filebase64sha512|filemd5|filemd1|filesha256|filesha512|md5|rsadecrypt|sha1|sha256|sha512|uuidv5|uuid|cidrhost|cidrnetmask|cidrsubnet|tobool|tolist|tomap|tonumber|toset|tostring|file|format|map|list",
              "name": "support.function.builtin.terraform"
            },
            {
              "match": "\\b(?!null|false|true)[[:alpha:]][[:alnum:]_-]*\\b",
              "name": "variable.function.hcl"
            }
          ]
        },
        "2": {
          "name": "punctuation.section.parens.begin.hcl"
        }
      },
      "end": "\\)",
      "endCaptures": {
        "0": {
          "name": "punctuation.section.parens.end.hcl"
        }
      },
      "patterns": [
        { "include": "source.hcl#comments" },
        { "include": "source.hcl#expressions" },
        { "include": "source.hcl#comma" }
      ]
    }
  }
}
